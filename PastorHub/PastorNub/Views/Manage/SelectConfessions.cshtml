@model PastorNub.Models.SelectConfession
@{
    ViewBag.Title = "Вибір конфесій";
}

    <div class="container">
        <div class="jumbotron row mt-5 SelectConfessionsStyle">

            @using (Html.BeginForm("SelectConfessions", "Manage", FormMethod.Post, new { @class = "form-horizontal mr-auto ml-auto col-12 text-center", role = "form" }))
            {
                @Html.AntiForgeryToken()
                <h2>@ViewBag.Title.</h2>
                <h4>Виберіть до чотирьох конфесій</h4>
                <p><span style="color:red;">Будьте обачні при виборі, в майбутньому змінити вибір буде неможливо</span></p>
                <hr />
                @Html.ValidationSummary("", new { @class = "text-danger" })

                <div id="select">
                    @foreach (var item in Model.Confessions)
                    {

                        <div>
                            <input type="checkbox" @if (Model.SelectedConfessions.Where(i => i.Confession.Id == item.Id).Count() > 0) { @("disabled checked")  } else { @("id=check" + item.Id + " onclick=Select(" + item.Id + ") name=SConfessions") } value="@(item.ConfessionName)" />
                            <label>@(item.ConfessionName)</label>
                        </div>

                    }
                </div>
                <div class="form-group mt-5">
                    <div class="col-md-12">
                        <input type="submit" class="btn col-4 btn-outline-success" value="Підтвердити" onclick="Check()" />
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-offset-2 col-md-12">
                        <a href="~/Manage/Index" class="btn btn-outline-success col-4">Назад</a>
                    </div>
                </div>
            }
        </div>

    </div>


<script>
    var Selected = @(Model.SelectedConfessions.Count);

    function Select(Id) {
        if ($("#check" + Id).is(':checked')) {
            Selected = Selected + 1;
        }
        else {
            Selected = Selected - 1;
        }

       

        if (Selected >= 4) {
            var inputs = document.getElementById("select").getElementsByTagName("input");
            for (i = 0; i < inputs.length; i++) {
                console.log("#" + inputs[i].getAttribute("id"));
                if (!$("#" + inputs[i].getAttribute("id")).is(':checked')) {
                    inputs[i].setAttribute("disabled", "");
                }
            }
        }
        else {
            var inputs = document.getElementById("select").getElementsByTagName("input");
            for (i = 0; i < inputs.length; i++) {
                if (inputs[i].getAttribute("id") != null) {
                    inputs[i].removeAttribute("disabled", "");
                }

            }
        }
    }

    function Check() {

    }
</script>